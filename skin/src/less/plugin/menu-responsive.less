@menu-items: 7;
@media (max-width: @grid-float-breakpoint){
	html, 
	body, 
	.menu-container{
		width: 100%;
		// height: 100%; bug safari
	}

	.content-wrap {
		overflow-y: scroll;
		-webkit-overflow-scrolling: touch;
	}

	.menu-content {
		position: relative;
	}

	.menu-content::before {
		position: absolute;
		top: 0;
		left: 0;
		z-index: 10;
		width: 100%;
		background: rgba(0,0,0,0.3);
		content: '';
		opacity: 0;
		-webkit-transform: translate3d(100%,0,0);
		transform: translate3d(100%,0,0);
		-webkit-transition: opacity 0.4s, -webkit-transform 0s 0.4s;
		transition: opacity 0.4s, transform 0s 0.4s;
		-webkit-transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		transition-timing-function: cubic-bezier(0.7,0,0.3,1);
	}

	
	/* Menu */
	.menu-wrap {
		position: fixed;
		left: 0; top: 0; bottom: 0;
		z-index: 1001;
		width: 300px;
		// height: 100%;
		overflow-y: auto;
		-webkit-transform: translate3d(-320px,0,0);
		transform: translate3d(-320px,0,0);
		-webkit-transition: -webkit-transform 0.4s;
		transition: transform 0.4s;
		-webkit-transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		transition-timing-function: cubic-bezier(0.7,0,0.3,1);
	}

	.menu, 
	.menu-list {
		// height: 100%;
	}

	.menu-list {
		-webkit-transform: translate3d(0,100%,0);
		transform: translate3d(0,100%,0);
	}

	.menu-list li {
		display: block;
		-webkit-transform: translate3d(0,500px,0);
		transform: translate3d(0,500px,0);
	}

	.menu-list,
	.menu-list li {
		-webkit-transition: -webkit-transform 0s 0.4s;
		transition: transform 0s 0.4s;
		-webkit-transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		transition-timing-function: cubic-bezier(0.7,0,0.3,1);
	}

	.generate-menu-list(@menu-items);
    .generate-menu-list(@menu-items, @i: 1) when (@i =< @menu-items) {
		.menu-list li:nth-child(@{i}){
        transform: translate3d(0,500px * @i,0);
      }
      .generate-menu-list(@menu-items, (@i + 1));
    }

	.menu-list li span {
		margin-left: 10px;
		font-weight: 700;
	}

	/* Shown menu */
	.show-menu .menu-wrap {
		-webkit-transform: translate3d(0,0,0);
		transform: translate3d(0,0,0);
		-webkit-transition: -webkit-transform 0.8s;
		transition: transform 0.8s;
		-webkit-transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		transition-timing-function: cubic-bezier(0.7,0,0.3,1);
	}

	.show-menu .menu-list,
	.show-menu .menu-list li  {
		-webkit-transform: translate3d(0,0,0);
		transform: translate3d(0,0,0);
		-webkit-transition: -webkit-transform 0.8s;
		transition: transform 0.8s;
		-webkit-transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		transition-timing-function: cubic-bezier(0.7,0,0.3,1);
	}

	.show-menu .menu-list li {
		-webkit-transition-duration: 0.9s;
		transition-duration: 0.9s;
	}

	.show-menu .content::before {
		opacity: 1;
		-webkit-transition: opacity 0.8s;
		transition: opacity 0.8s;
		-webkit-transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		transition-timing-function: cubic-bezier(0.7,0,0.3,1);
		-webkit-transform: translate3d(0,0,0);
		transform: translate3d(0,0,0);
	}



	// STYLE
	.menu-container {
		background: #373a47;
	}

	.menu-wrap a {
		.primary;
	}

	.menu-wrap a:hover,
	.menu-wrap a:focus {
		color: #c94e50;
	}

	.menu-content {
		background: #b4bad2;
	}

	.menu-wrap {
		background: #eee;
		padding: 2.5em 1.5em 0;
		font-size: 1.15em;
	}

	/* Menu Button */
	.menu-button {
		position: fixed;
		z-index: 1000;
		margin: 1em;
		padding: 0;
		width: 2.5em;
		height: 2.25em;
		border: none;
		text-indent: 2.5em;
		font-size: 1.5em;
		color: transparent;
		background: transparent;
	}

	.menu-button::before {
		position: absolute;
		top: 0.5em;
		right: 0.5em;
		bottom: 0.5em;
		left: 0.5em;
		background: linear-gradient(#373a47 20%, transparent 20%, transparent 40%, #373a47 40%, #373a47 60%, transparent 60%, transparent 80%, #373a47 80%);
		content: '';
	}

	.menu-button:hover {
		opacity: 0.6;
	}

	/* Close Button */
	.close-button {
		width: 1em;
		height: 1em;
		position: absolute;
		right: 1em;
		top: 1em;
		overflow: hidden;
		text-indent: 1em;
		font-size: 0.75em;
		border: none;
		background: transparent;
		color: transparent;
	}

	.close-button::before,
	.close-button::after {
		content: '';
		position: absolute;
		width: 3px;
		height: 100%;
		top: 0;
		left: 50%;
		background: #bdc3c7;
	}

	.close-button::before {
		-webkit-transform: rotate(45deg);
		transform: rotate(45deg);
	}

	.close-button::after {
		-webkit-transform: rotate(-45deg);
		transform: rotate(-45deg);
	}

	button.navbar-toggle{
		.icon-bar{
			background: @brand-primary;
			.transition;
		}
	}
	.show-menu{
		button.navbar-toggle{
			.icon-bar{
				&:first-child,
				&:nth-child(3){
					position: absolute;
					margin: 0;
					top: 14px;
				}
				&:first-child{
					.rotate(45deg);
				}
				&:nth-child(3){
					.rotate(-45deg);
				}
				&:nth-child(2){
					.opacity(0);
				}
			}
		}

		.content-wrap{
			&:before{
				position: absolute;
				left: 0; right: 0;
				top: 0; bottom: 0;
				background: fade(#000, 30%);
				content: '';
				display: block;
				z-index: 1000;
			}
		}
	}
}



@media (min-width: @grid-float-breakpoint-max){
	.close-button{
		.hide();
	}
}
